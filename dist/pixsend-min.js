!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Pixsend=t()}(function(){return function n(o,i,l){function a(e,t){if(!i[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(s)return s(e,!0);throw(r=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",r}r=i[e]={exports:{}},o[e][0].call(r.exports,function(t){return a(o[e][1][t]||t)},r,r.exports,n,o,i,l)}return i[e].exports}for(var s="function"==typeof require&&require,t=0;t<l.length;t++)a(l[t]);return a}({1:[function(t,e,r){!function(u){!function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=t("validator/lib/isURL"),a=t("url-parse"),s=t("object-assign");e.exports=function(){function n(t,e,r){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),!t.src||!this._isUrl(t.src))throw new Error("please provide a valid src url with http/https protocol");this.parsedSrc=a(t.src,!0),this._isDebug=t.debug,this._data=e||{},this._window=r||u}var t,e,r;return t=n,(e=[{key:"_buildSrc",value:function(){return this.parsedSrc.set("query",s(this.parsedSrc.query,this._data)),this.parsedSrc.toString()}},{key:"_createPixel",value:function(t){var e=this._window.document.createElement("img");e.style.height="0px",e.style.width="0px",e.src=t,this._log("createPixel -> pixel created")}},{key:"add",value:function(t){if("object"!==o(t))throw new Error("add method support only object");return this._data=s(this._data,t),this._log("add -> data updated: ",this._data),this}},{key:"send",value:function(){var t=this._buildSrc();this._log("sending pixel -> src: ",t),this._createPixel(t)}},{key:"_isUrl",value:function(t){if(-1<t.indexOf("//localhost"))return!0;return l(t,{protocols:["http","https"],require_protocol:!0})}},{key:"_log",value:function(){if(this._isDebug){for(var t=0;t<arguments.length;t++)"object"===o(arguments[t])&&(arguments[t]=JSON.stringify(arguments[t],null,"\t"));console.log.apply(console,arguments)}}}])&&i(t.prototype,e),r&&i(t,r),n}()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":2,"url-parse":5,"validator/lib/isURL":8}],2:[function(t,e,r){"use strict";var s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},n)).join("")?void 0:1}catch(t){return}}()?Object.assign:function(t,e){for(var r,n=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var i in r=Object(arguments[o]))u.call(r,i)&&(n[i]=r[i]);if(s)for(var l=s(r),a=0;a<l.length;a++)c.call(r,l[a])&&(n[l[a]]=r[l[a]])}return n}},{}],3:[function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty;function l(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function a(t){try{return encodeURIComponent(t)}catch(t){return null}}r.stringify=function(t,e){var r,n,o=[];for(n in"string"!=typeof(e=e||"")&&(e="?"),t)i.call(t,n)&&((r=t[n])||null!=r&&!isNaN(r)||(r=""),n=a(n),r=a(r),null!==n&&null!==r&&o.push(n+"="+r));return o.length?e+o.join("&"):""},r.parse=function(t){for(var e=/([^=?#&]+)=?([^&]*)/g,r={};o=e.exec(t);){var n=l(o[1]),o=l(o[2]);null===n||null===o||n in r||(r[n]=o)}return r}},{}],4:[function(t,e,r){"use strict";e.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},{}],5:[function(t,r,e){!function(l){!function(){"use strict";var p=t("requires-port"),h=t("querystringify"),o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/,e=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function y(t){return(t||"").toString().replace(e,"")}var g=[["#","hash"],["?","query"],function(t,e){return v(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],i={hash:1,query:1};function b(t){var e,r="undefined"!=typeof window?window:void 0!==l?l:"undefined"!=typeof self?self:{},r=r.location||{},n={},r=typeof(t=t||r);if("blob:"===t.protocol)n=new _(unescape(t.pathname),{});else if("string"==r)for(e in n=new _(t,{}),i)delete n[e];else if("object"==r){for(e in t)e in i||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=o.test(t.href))}return n}function v(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function w(t,e){t=y(t),e=e||{};var r,n=a.exec(t),o=n[1]?n[1].toLowerCase():"",i=!!n[2],l=!!n[3],t=0;return i?t=l?(r=n[2]+n[3]+n[4],n[2].length+n[3].length):(r=n[2]+n[4],n[2].length):l?(r=n[3]+n[4],t=n[3].length):r=n[4],"file:"===o?2<=t&&(r=r.slice(2)):v(o)?r=n[4]:o?i&&(r=r.slice(2)):2<=t&&v(e.protocol)&&(r=n[4]),{protocol:o,slashes:i||v(o),slashesCount:t,rest:r}}function _(t,e,r){if(t=y(t),!(this instanceof _))return new _(t,e,r);var n,o,i,l,a,s=g.slice(),u=typeof e,c=this,f=0;for("object"!=u&&"string"!=u&&(r=e,e=null),r&&"function"!=typeof r&&(r=h.parse),n=!(u=w(t||"",e=b(e))).protocol&&!u.slashes,c.slashes=u.slashes||n&&e.slashes,c.protocol=u.protocol||e.protocol||"",t=u.rest,("file:"===u.protocol&&(2!==u.slashesCount||d.test(t))||!u.slashes&&(u.protocol||u.slashesCount<2||!v(c.protocol)))&&(s[3]=[/(.*)/,"pathname"]);f<s.length;f++)"function"!=typeof(i=s[f])?(o=i[0],a=i[1],o!=o?c[a]=t:"string"==typeof o?~(l=t.indexOf(o))&&(t="number"==typeof i[2]?(c[a]=t.slice(0,l),t.slice(l+i[2])):(c[a]=t.slice(l),t.slice(0,l))):(l=o.exec(t))&&(c[a]=l[1],t=t.slice(0,l.index)),c[a]=c[a]||n&&i[3]&&e[a]||"",i[4]&&(c[a]=c[a].toLowerCase())):t=i(t,c);r&&(c.query=r(c.query)),n&&e.slashes&&"/"!==c.pathname.charAt(0)&&(""!==c.pathname||""!==e.pathname)&&(c.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,t=r[n-1],o=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(o=!0),r.splice(n,1),i--);return o&&r.unshift(""),"."!==t&&".."!==t||r.push(""),r.join("/")}(c.pathname,e.pathname)),"/"!==c.pathname.charAt(0)&&v(c.protocol)&&(c.pathname="/"+c.pathname),p(c.port,c.protocol)||(c.host=c.hostname,c.port=""),c.username=c.password="",c.auth&&(i=c.auth.split(":"),c.username=i[0]||"",c.password=i[1]||""),c.origin="file:"!==c.protocol&&v(c.protocol)&&c.host?c.protocol+"//"+c.host:"null",c.href=c.toString()}_.prototype={set:function(t,e,r){var n,o=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||h.parse)(e)),o[t]=e;break;case"port":o[t]=e,p(e,o.protocol)?e&&(o.host=o.hostname+":"+e):(o.host=o.hostname,o[t]="");break;case"hostname":o[t]=e,o.port&&(e+=":"+o.port),o.host=e;break;case"host":o[t]=e,/:\d+$/.test(e)?(e=e.split(":"),o.port=e.pop(),o.hostname=e.join(":")):(o.hostname=e,o.port="");break;case"protocol":o.protocol=e.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":e?(n="pathname"===t?"/":"#",o[t]=e.charAt(0)!==n?n+e:e):o[t]=e;break;default:o[t]=e}for(var i=0;i<g.length;i++){var l=g[i];l[4]&&(o[l[1]]=o[l[1]].toLowerCase())}return o.origin="file:"!==o.protocol&&v(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(t){t&&"function"==typeof t||(t=h.stringify);var e=this,r=e.protocol;return r&&":"!==r.charAt(r.length-1)&&(r+=":"),r+=e.slashes||v(e.protocol)?"//":"",e.username&&(r+=e.username,e.password&&(r+=":"+e.password),r+="@"),r+=e.host+e.pathname,(t="object"==typeof e.query?t(e.query):e.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),e.hash&&(r+=e.hash),r}},_.extractProtocol=w,_.location=b,_.trimLeft=y,_.qs=h,r.exports=_}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:3,"requires-port":4}],6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){(0,n.default)(t),(e=(0,o.default)(e,l)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));!0===e.allow_wildcard&&0===t.indexOf("*.")&&(t=t.substring(2));var r=t.split("."),t=r[r.length-1];if(e.require_tld){if(r.length<2)return!1;if(!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(t))return!1;if(/\s/.test(t))return!1}return!(!e.allow_numeric_tld&&/^\d+$/.test(t))&&r.every(function(t){return!(63<t.length)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(t)&&(!/[\uff01-\uff5e]/.test(t)&&(!/^-|-$/.test(t)&&!(!e.allow_underscores&&/_/.test(t)))))})};var n=i(t("./util/assertString")),o=i(t("./util/merge"));function i(t){return t&&t.__esModule?t:{default:t}}var l={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1};e.exports=r.default,e.exports.default=r.default},{"./util/assertString":9,"./util/merge":10}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";(0,o.default)(e);r=String(r);if(!r)return t(e,4)||t(e,6);if("4"===r){if(!i.test(e))return!1;var n=e.split(".").sort(function(t,e){return t-e});return n[3]<=255}if("6"===r)return!!l.test(e);return!1};var o=(n=t("./util/assertString"))&&n.__esModule?n:{default:n};var t="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",n="(".concat(t,"[.]){3}").concat(t),i=new RegExp("^".concat(n,"$")),t="(?:[0-9a-fA-F]{1,4})",l=new RegExp("^("+"(?:".concat(t,":){7}(?:").concat(t,"|:)|")+"(?:".concat(t,":){6}(?:").concat(n,"|:").concat(t,"|:)|")+"(?:".concat(t,":){5}(?::").concat(n,"|(:").concat(t,"){1,2}|:)|")+"(?:".concat(t,":){4}(?:(:").concat(t,"){0,1}:").concat(n,"|(:").concat(t,"){1,3}|:)|")+"(?:".concat(t,":){3}(?:(:").concat(t,"){0,2}:").concat(n,"|(:").concat(t,"){1,4}|:)|")+"(?:".concat(t,":){2}(?:(:").concat(t,"){0,3}:").concat(n,"|(:").concat(t,"){1,5}|:)|")+"(?:".concat(t,":){1}(?:(:").concat(t,"){0,4}:").concat(n,"|(:").concat(t,"){1,6}|:)|")+"(?::((?::".concat(t,"){0,5}:").concat(n,"|(?::").concat(t,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=r.default,e.exports.default=r.default},{"./util/assertString":9}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){if((0,u.default)(t),!t||/[\s<>]/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;if((e=(0,p.default)(e,d)).validate_length&&2083<=t.length)return!1;if(!e.allow_fragments&&t.includes("#"))return!1;if(!e.allow_query_components&&(t.includes("?")||t.includes("&")))return!1;var r,n,o,i;if(1<(i=(t=(i=(t=(i=t.split("#")).shift()).split("?")).shift()).split("://")).length){if(r=i.shift().toLowerCase(),e.require_valid_protocol&&-1===e.protocols.indexOf(r))return!1}else{if(e.require_protocol)return!1;if("//"===t.substr(0,2)){if(!e.allow_protocol_relative_urls)return!1;i[0]=t.substr(2)}}if(""===(t=i.join("://")))return!1;if(""===(t=(i=t.split("/")).shift())&&!e.require_host)return!0;if(1<(i=t.split("@")).length){if(e.disallow_auth)return!1;if(""===i[0])return!1;if(0<=(o=i.shift()).indexOf(":")&&2<o.split(":").length)return!1;var l=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(n=(l=a.next()).done)&&(r.push(l.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.split(":"),2),a=l[0],s=l[1];if(""===a&&""===s)return!1}o=i.join("@"),a=l=null;s=o.match(y);s?(n="",a=s[1],l=s[2]||null):(i=o.split(":"),n=i.shift(),i.length&&(l=i.join(":")));if(null!==l&&0<l.length){if(i=parseInt(l,10),!/^[0-9]+$/.test(l)||i<=0||65535<i)return!1}else if(e.require_port)return!1;if(e.host_whitelist)return g(n,e.host_whitelist);if(!((0,f.default)(n)||(0,c.default)(n,e)||a&&(0,f.default)(a,6)))return!1;if(n=n||a,e.host_blacklist&&g(n,e.host_blacklist))return!1;return!0};var u=n(t("./util/assertString")),c=n(t("./isFQDN")),f=n(t("./isIP")),p=n(t("./util/merge"));function n(t){return t&&t.__esModule?t:{default:t}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var d={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},y=/^\[([^\]]+)\](?::([0-9]+))?$/;function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(t===n||"[object RegExp]"===Object.prototype.toString.call(n)&&n.test(t))return!0}return!1}e.exports=r.default,e.exports.default=r.default},{"./isFQDN":6,"./isIP":7,"./util/assertString":9,"./util/merge":10}],9:[function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){if(!("string"==typeof t||t instanceof String)){var e=n(t);throw null===t?e="null":"object"===e&&(e=t.constructor.name),new TypeError("Expected a string but received a ".concat(e))}},e.exports=r.default,e.exports.default=r.default},{}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0;for(t in r)void 0===e[t]&&(e[t]=r[t]);return e},e.exports=r.default,e.exports.default=r.default},{}]},{},[1])(1)});